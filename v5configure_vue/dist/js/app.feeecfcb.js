(function(e){function t(t){for(var r,n,i=t[0],s=t[1],c=t[2],d=0,m=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&m.push(l[n][0]),l[n]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var s=a[i];0!==l[s]&&(r=!1)}r&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},l={app:0},o=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"039a":function(e,t,a){"use strict";a("7174")},"0b35":function(e,t,a){"use strict";a("7df9")},"0f87":function(e,t,a){},"21da":function(e,t,a){"use strict";a("6b3e")},"314f":function(e,t,a){"use strict";a("5b72")},3640:function(e,t,a){},4678:function(e,t,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function l(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}l.keys=function(){return Object.keys(r)},l.resolve=o,e.exports=l,l.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],n={name:"App"},i=n,s=(a("034f"),a("2877")),c=Object(s["a"])(i,l,o,!1,null,null,null),u=c.exports,d=a("5c96"),m=a.n(d),p=(a("0fae"),a("8c4f")),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("body",{attrs:{id:"poster"}},[a("el-form",{staticClass:"login-container",attrs:{"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"login_title"},[e._v("系统登录")]),a("el-form-item",[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%",background:"#505458",border:"none"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)},b=[],g=(a("ac1f"),a("5319"),{name:"Login",data:function(){return{loginForm:{username:"",password:""},responseResult:[]}},methods:{login:function(){var e=this,t=this;this.$axios.post("/login",{username:t.loginForm.username,password:t.loginForm.password}).then((function(a){if(200===a.data.code){t.$store.commit("login",t.loginForm);var r=t.$route.query.redirect;console.log("path "+r),e.$router.replace({path:"/"===r||void 0===r?"/index":r})}})).catch((function(e){}))}}}),h=g,v=(a("039a"),Object(s["a"])(h,f,b,!1,null,null,null)),_=v.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("nav-menu"),a("router-view")],1)},F=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticStyle:{"min-width":"1300px"},attrs:{"default-active":"/index",router:"",mode:"horizontal","background-color":"white","text-color":"#222","active-text-color":"red",display:"table"}},[e._l(e.navList,(function(t,r){return a("el-menu-item",{key:r,attrs:{index:t.name},on:{select:e.handleSelect}},[e._v(" "+e._s(t.navItem)+" ")])})),a("el-input",{staticStyle:{width:"300px",position:"absolute","margin-top":"12px",right:"5%"},attrs:{placeholder:"快速搜索...","prefix-icon":"el-icon-search",size:"medium"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),a("span",{staticStyle:{position:"absolute","padding-top":"20px",right:"43%","font-size":"20px","font-weight":"bold"}},[e._v("大屏推送管理平台")])],2)},j=[],k={name:"NavMenu",data:function(){return{navList:[{name:"/index",navItem:"设备列表"},{name:"/devicegroups",navItem:"设备分组"},{name:"/contents",navItem:"内容列表"},{name:"/category",navItem:"分类列表"}]}},methods:{handleSelect:function(e,t){console.log("~~"+e+"~~",t)}}},$=k,w=(a("997f"),Object(s["a"])($,x,j,!1,null,"12e43db7",null)),C=w.exports,D={name:"Home",components:{NavMenu:C}},q=D,S=Object(s["a"])(q,y,F,!1,null,"276c2cfa",null),E=S.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{staticStyle:{width:"200px","margin-top":"20px"}},[a("switch"),a("SideMenu")],1),a("el-main",[a("books",{staticClass:"books-area"})],1)],1)},T=[],V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"categories",attrs:{"default-active":"0","active-text-color":"red"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"0"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("全部")])]),a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("文学")])]),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("流行")])]),a("el-menu-item",{attrs:{index:"3"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("文化")])]),a("el-menu-item",{attrs:{index:"4"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("生活")])]),a("el-menu-item",{attrs:{index:"5"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("经管")])]),a("el-menu-item",{attrs:{index:"6"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("科技")])])],1)},Y=[],L={name:"SideMenu"},O=L,M=(a("9669"),Object(s["a"])(O,V,Y,!1,null,"59f002e6",null)),I=M.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{height:"840px"}},e._l(e.books,(function(t){return a("el-tooltip",{key:t.id,attrs:{effect:"dark",placement:"right"}},[a("p",{staticStyle:{"font-size":"14px","margin-bottom":"6px"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.title))]),a("p",{staticStyle:{"font-size":"13px","margin-bottom":"6px"},attrs:{slot:"content"},slot:"content"},[a("span",[e._v(e._s(t.author))]),e._v(" / "),a("span",[e._v(e._s(t.date))]),e._v(" / "),a("span",[e._v(e._s(t.press))])]),a("p",{staticClass:"abstract",staticStyle:{width:"300px"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.abs))]),a("el-card",{staticClass:"book",staticStyle:{width:"135px","margin-bottom":"20px",height:"233px",float:"left","margin-right":"15px"},attrs:{bodyStyle:"padding:10px",shadow:"hover"}},[a("div",{staticClass:"cover"},[a("img",{attrs:{src:t.cover,alt:"封面"}})]),a("div",{staticClass:"info"},[a("div",{staticClass:"title"},[a("a",{attrs:{href:""}},[e._v(e._s(t.title))])])]),a("div",{staticClass:"author"},[e._v(e._s(t.author))])])],1)})),1),a("el-row",[a("el-pagination",{attrs:{"current-page":1,"page-size":10,total:20}})],1)],1)},P=[],A={name:"Books",data:function(){return{books:[{cover:"https://i.loli.net/2019/04/10/5cada7e73d601.jpg",title:"三体",author:"刘慈欣",date:"2019-05-05",press:"重庆出版社",abs:"文化大革命如火如荼进行的同时。军方探寻外星文明的绝秘计划“红岸工程”取得了突破性进展。但在按下发射键的那一刻，历经劫难的叶文洁没有意识到，她彻底改变了人类的命运。地球文明向宇宙发出的第一声啼鸣，以太阳为中心，以光速向宇宙深处飞驰……"}]}}},U=A,R=(a("8dfb"),Object(s["a"])(U,H,P,!1,null,"d86ddb2c",null)),G=R.exports,N={name:"AppLibrary",components:{SideMenu:I,Books:G}},W=N,J=(a("314f"),Object(s["a"])(W,z,T,!1,null,"0937cff2",null)),B=J.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("body",{staticClass:"devicelist_body"},[a("el-button",{staticClass:"add_btn",attrs:{type:"text",align:"left"},on:{click:function(t){return e.handleClick(-1,2)}}},[e._v("新增")]),a("el-table",{staticClass:"devices_table",attrs:{data:e.devicelist}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"设备名称"}}),a("el-table-column",{attrs:{align:"center",prop:"register_id",label:"Register_Id"}}),a("el-table-column",{attrs:{align:"center",prop:"device_id",label:"设备号"}}),a("el-table-column",{attrs:{align:"center",prop:"device_group",label:"设备分组"}}),a("el-table-column",{attrs:{align:"center",prop:"operator_name",label:"操作人"}}),a("el-table-column",{attrs:{align:"center",prop:"time",label:"操作时间"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,0)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,1)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,3)}}},[e._v("移除")])]}}])})],1),e.cleanDialog?a("el-dialog",{attrs:{title:"设备详情",width:"30%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.closeDialog()}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":e.formLabelWidth,disabled:e.inputEnable}},[a("el-form-item",{attrs:{label:"设备名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"设备名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"Register_Id",prop:"register_id"}},[a("el-input",{attrs:{placeholder:"别名"},model:{value:e.ruleForm.register_id,callback:function(t){e.$set(e.ruleForm,"register_id",t)},expression:"ruleForm.register_id"}})],1),a("el-form-item",{attrs:{label:"设备号",prop:"device_id"}},[a("el-input",{attrs:{placeholder:"设备号"},model:{value:e.ruleForm.device_id,callback:function(t){e.$set(e.ruleForm,"device_id",t)},expression:"ruleForm.device_id"}})],1),a("el-form-item",{attrs:{label:"设备分组",prop:"device_group"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.device_group,callback:function(t){e.$set(e.ruleForm,"device_group",t)},expression:"ruleForm.device_group"}},e._l(e.grouplist,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{staticStyle:{"align-items":"start"},attrs:{label:"图标","label-width":e.formLabelWidth,prop:"cover"}},[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"图片 URL",clearable:""},model:{value:e.ruleForm.image,callback:function(t){e.$set(e.ruleForm,"image",t)},expression:"ruleForm.image"}})],1),a("el-col",{attrs:{span:10}},[a("img-upload",{ref:"imgUpload",on:{onUpload:e.uploadImg}})],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1),a("el-form-item",{attrs:{label:"上线",align:"left",prop:"release"}},[a("el-switch",{model:{value:e.ruleForm.release,callback:function(t){e.$set(e.ruleForm,"release",t)},expression:"ruleForm.release"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.inputEnable,expression:"!inputEnable"}]},[a("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.btnTxt)},on:{click:function(t){return e.submitForm()}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1):e._e()],1)},Q=[],X=(a("99af"),a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{ref:"upload",staticClass:"img-upload",attrs:{action:"/api/uploadfile","show-file-list":!0,"with-credentials":"",multiple:"",limit:15,"file-list":e.fileList,"on-preview":e.handlePreview,"on-success":e.handleSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传文件")])],1)}),Z=[],ee={data:function(){return{fileList:[],url:""}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleSuccess:function(e){this.url=e,console.log("handleSuccess >> "+e),this.$emit("onUpload"),this.$message.warning("上传成功")},clear:function(){this.$refs.upload.clearFiles()}}},te=ee,ae=(a("b77a"),Object(s["a"])(te,X,Z,!1,null,"96b7c57e",null)),re=ae.exports,le={name:"DeviceList",components:{ImgUpload:re},data:function(){return{btnTxt:"",devicelist:[],grouplist:[],cleanDialog:!1,dialogFormVisible:!1,fileList:[],ruleForm:{id:"",name:"",register_id:"",device_id:"",device_group:"",operator_name:"",note:"",image:""},formLabelWidth:"120px",dialogType:0,inputEnable:!1,username:"",device:"",type:0,date:"",rules:{name:[{required:!0,message:"请输入设备名称",trigger:"blur"}],register_id:[{required:!0,message:"请输入设备别名",trigger:"blur"}],device_id:[{required:!0,message:"请输入设备编码",trigger:"blur"}],device_group:[{required:!0,message:"请选择设备分组",trigger:"blur"}],note:[{required:!1,message:"备注",trigger:"blur"}]}}},mounted:function(){this.queryall(),this.queryAllGroup()},methods:{handleRemove:function(){},handlePreview:function(){},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleSuccess:function(e){this.ruleForm.image=e,this.$emit("onUpload"),this.$message.warning("上传成功")},clear:function(){this.$refs.upload.clearFiles()},uploadImg:function(){this.ruleForm.image=this.$refs.imgUpload.url},queryall:function(){var e=this,t="/queryalldevice";this.$axios.get(t).then((function(t){t&&200===t.data.code?e.devicelist=t.data.data:e.devicelist=null}))},queryAllGroup:function(){var e=this,t="/queryalldevicegroup";this.$axios.get(t).then((function(t){t&&200===t.data.code?e.grouplist=t.data.data:e.grouplist=null}))},handleClick:function(e,t){var a=this;switch(a.dialogType=t,t){case 0:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t;var r=a.devicelist[e];this.filldata(r);break;case 1:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t;var l=a.devicelist[e];a.filldata(l),a.btnTxt="提交修改";break;case 2:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t,a.btnTxt="立即创建";break;case 3:this.delete(a.devicelist[e]);break}},filldata:function(e){this.ruleForm=e},delete:function(e){var t=this;this.device=e.name,this.$axios.delete("/removedevice/"+e.id).then((function(e){e&&200===e.data.code&&t.queryall()}))},submitForm:function(){var e=this,t=this;t.device=t.ruleForm.name,t.$refs.ruleForm.validate((function(a){if(!a)return!1;e.dialogFormVisible=!1,null==e.ruleForm.id?e.$axios.post("/appenddevice",{name:t.ruleForm.name,register_id:t.ruleForm.register_id,device_id:t.ruleForm.device_id,device_group:t.ruleForm.device_group,time:e.$moment(new Date).format("YYYY-MM-DD  HH:mm:ss"),operator_name:e.$store.state.user.username,note:t.ruleForm.note,image:t.ruleForm.image}).then((function(e){200===e.data.code&&t.queryall()})).catch((function(e){})):t.$axios.post("/updatedevice",{id:t.ruleForm.id,name:t.ruleForm.name,register_id:t.ruleForm.register_id,device_id:t.ruleForm.device_id,device_group:t.ruleForm.device_group,time:e.$moment(new Date).format("YYYY-MM-DD  HH:mm:ss"),operator_name:e.$store.state.user.username,note:t.ruleForm.note,image:t.ruleForm.image}).then((function(e){console.log(e.data),200===e.data.code&&(t.queryall(),t.addevent())})).catch((function(e){}))}))},closeDialog:function(){this.ruleForm={id:"",name:"",register_id:"",device_id:"",device_group:"",time:"",operator_name:"",note:"",image:""}},findbyuuid:function(){var e="/findbyuuid?uuid=8d8d7c73-2333-41d2-9994-c2180aa892f7";this.$axios.get(e).then((function(e){e&&e.data.code}))},addevent:function(){}}},oe=le,ne=(a("21da"),Object(s["a"])(oe,K,Q,!1,null,null,null)),ie=ne.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("body",{staticClass:"contents_body"},[a("el-button",{staticClass:"add_btn",attrs:{type:"text",align:"left"},on:{click:function(t){return e.handleClick(-1,2)}}},[e._v("新增")]),a("el-table",{staticClass:"contents_table",attrs:{data:e.contentlist}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"}}),a("el-table-column",{attrs:{align:"center",prop:"type_name",label:"类型"}}),a("el-table-column",{attrs:{align:"center",prop:"category",label:"类别"}}),a("el-table-column",{attrs:{align:"center",prop:"date",label:"操作时间"}}),a("el-table-column",{attrs:{align:"center",prop:"operator_name",label:"操作人"}}),a("el-table-column",{attrs:{align:"center",prop:"content",label:"content"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,0)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,1)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,3)}}},[e._v("移除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,4)}}},[e._v("推送")])]}}])})],1),e.cleanDialog?a("el-dialog",{attrs:{title:"推送详情",width:"30%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.closeDialog()}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":e.formLabelWidth,disabled:e.inputEnable}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{attrs:{placeholder:"内容"},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"类别",prop:"category"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","value-key":"id"},model:{value:e.ruleForm.category,callback:function(t){e.$set(e.ruleForm,"category",t)},expression:"ruleForm.category"}},e._l(e.categorys,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})})),1)],1),0!=this.dialogType||e.ruleForm.expirationdate[0]>0&&e.ruleForm.expirationdate[1]>0?a("el-form-item",{attrs:{label:"有效期",prop:"expirationdate"}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.ruleForm.expirationdate,callback:function(t){e.$set(e.ruleForm,"expirationdate",t)},expression:"ruleForm.expirationdate"}})],1):e._e(),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1),e.ruleForm.type.value>0?a("el-form-item",{staticStyle:{"align-items":"start"},attrs:{label:"资源文件","label-width":e.formLabelWidth,prop:"cover"}},[a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"资源路径 URL",clearable:""},model:{value:e.ruleForm.resource_str,callback:function(t){e.$set(e.ruleForm,"resource_str",t)},expression:"ruleForm.resource_str"}})],1),a("el-col",{attrs:{span:7}},[a("img-upload",{ref:"imgUpload",on:{onUpload:e.uploadImg}})],1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.inputEnable,expression:"!inputEnable"}]},[a("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.btnTxt)},on:{click:function(t){return e.submitForm()}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1):e._e(),e.push_dialog_show?a("el-dialog",{attrs:{title:"推送设备",width:"30%","close-on-click-modal":!1,visible:e.push_dialog_form_visible},on:{"update:visible":function(t){e.push_dialog_form_visible=t},close:function(t){return e.closeSelectDialog()}}},[a("el-cascader",{ref:"cascader",attrs:{options:e.push_dialog_data,props:e.push_dialog_props,"collapse-tags":"",clearable:""},on:{change:e.handleChange}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.pushTxt)},on:{click:function(t){return e.doPushRequest()}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.push_dialog_form_visible=!1}}},[e._v("取消")])],1)],1):e._e()],1)},ce=[],ue=(a("159b"),a("d81d"),a("1276"),a("4de4"),{name:"ContentList",components:{ImgUpload:re},data:function(){var e=this;return{push_dialog_show:!1,currentpushcontent:{},push_dialog_form_visible:!1,push_dialog_data:[],push_dialog_props:{multiple:!0,checkStrictly:!1,lazy:!0,lazyLoad:function(t,a){e.getSubData(t.data,a)}},btnTxt:"",pushTxt:"立即推送",contentlist:[],devicegroups:[],categorys:[],types:[{name:"文字",value:0},{name:"图片",value:1},{name:"视频",value:2}],cleanDialog:!1,dialogFormVisible:!1,ruleForm:{id:"",name:"",content:"",type:{name:"文字",value:0},category:{},date:"",operator_name:"",operator_id:0,resource_path:[],resource_str:"",release:!1,expirationdate:[]},formLabelWidth:"120px",dialogType:0,inputEnable:!1,username:"",date:"",rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],content:[{required:!0,message:"请输入推送内容",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],category:[{required:!0,message:"请选择类别",trigger:"blur"}]}}},mounted:function(){this.queryall(),this.queryCategoryGroup(),this.queryDeviceGroup()},methods:{handleChange:function(e){if(console.log("handleChange value >> "+e),e.length>0){var t=this.$refs["cascader"].getCheckedNodes();t.forEach((function(e,t){console.log(">>>>"+t+" label "+e.label+" isLeaf "+e.isLeaf+"  cn.value "+e.value)}))}},queryDeviceGroup:function(){var e=this,t="/queryalldevicegroup";this.$axios.get(t).then((function(t){t&&200===t.data.code?e.push_dialog_data=t.data.data.map((function(e){return{value:e.alias,label:e.name,leaf:!1}})):e.push_dialog_data=null}))},getSubData:function(e,t){var a="/finddevicebygroupname?group_name="+e.label;this.$axios.get(a).then((function(e){if(e&&200===e.data.code){var a=e.data.data.map((function(e){return{value:e.id,label:e.name,leaf:!0}}));t(a)}}))},uploadImg:function(){this.ruleForm.resource_path.push(this.$refs.imgUpload.url),this.ruleForm.resource_str=this.processStringArray()},queryall:function(){var e=this,t="/queryallcontent";this.$axios.get(t).then((function(t){t&&200===t.data.code?e.contentlist=t.data.data:e.contentlist=null}))},handleClick:function(e,t){var a=this;switch(a.dialogType=t,t){case 0:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t;var r=a.contentlist[e];this.filldata(r);break;case 1:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t;var l=a.contentlist[e];a.filldata(l),a.btnTxt="提交修改";break;case 2:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t,a.btnTxt="立即创建";break;case 3:this.delete(a.contentlist[e]);break;case 4:a.push_dialog_show=!0,a.push_dialog_form_visible=!0,a.currentpushcontent=a.contentlist[e],a.queryDeviceGroup();break}},filldata:function(e){this.ruleForm.id=e.id,this.ruleForm.name=e.name,this.ruleForm.content=e.content,this.ruleForm.type={name:e.type_name,value:e.type_id},this.ruleForm.category_id=e.category_id,this.ruleForm.category={name:e.category,id:e.category_id},this.ruleForm.operator_name=e.operator_name,this.ruleForm.operator_id=e.operator_id,this.ruleForm.date=e.date,this.ruleForm.resource_path=e.resource_path.split(";"),this.ruleForm.resource_str=e.resource_path,this.ruleForm.expirationdate.push(e.expirationdate_start),this.ruleForm.expirationdate.push(e.expirationdate_end)},delete:function(e){var t=this;this.channelinfo=e.name,this.$axios.delete("/removecontent/"+e.id).then((function(e){e&&200===e.data.code&&(t.queryall(),t.addevent())}))},submitForm:function(){var e=this,t=this;t.channelinfo=t.ruleForm.name,t.$refs.ruleForm.validate((function(a){if(!a)return!1;e.dialogFormVisible=!1,null==e.ruleForm.appid?e.$axios.post("/appendcontent",{id:t.ruleForm.id,name:t.ruleForm.name,type_name:t.ruleForm.type.name,type_id:t.ruleForm.type.value,category:t.ruleForm.category.name,category_id:t.ruleForm.category.id,date:t.$moment(new Date).format("YYYY-MM-DD  HH:mm:ss"),operator_name:t.$store.state.user.username,resource_path:t.processStringArray(),content:t.ruleForm.content,release:!0,expirationdate_start:null==t.ruleForm.expirationdate?"":t.ruleForm.expirationdate[0],expirationdate_end:null==t.ruleForm.expirationdate?"":t.ruleForm.expirationdate[1]}).then((function(e){200===e.data.code&&(t.queryall(),t.addevent())})).catch((function(e){})):t.$axios.post("/updatecontent",{id:t.ruleForm.id,name:t.ruleForm.name,type_name:t.ruleForm.type.name,type_id:t.ruleForm.type.value,category:t.ruleForm.category.name,category_id:t.ruleForm.category.category_id,date:t.$moment(new Date).format("YYYY-MM-DD  HH:mm:ss"),operator_name:t.$store.state.user.username,resource_path:t.processStringArray(),content:t.ruleForm.content,release:!0,expirationdate_start:null==t.ruleForm.expirationdate?"":t.ruleForm.expirationdate[0],expirationdate_end:null==t.ruleForm.expirationdate?"":t.ruleForm.expirationdate[1]}).then((function(e){200===e.data.code&&(t.queryall(),t.addevent())})).catch((function(e){}))}))},closeDialog:function(){this.ruleForm={id:"",name:"",content:"",type:{name:"文字",value:0},category:{},category_id:-1,date:"",operator_name:"",operator_id:0,resource_path:[],resource_str:"",release:!1}},closeSelectDialog:function(){this.push_dialog_data=[],this.ruleForm.push_dialog_show=!1,this.ruleForm.push_dialog_form_visible=!1,++this.isResourceShow},queryCategoryGroup:function(){var e=this,t="/queryallcategory";this.$axios.get(t).then((function(t){t&&200===t.data.code?(e.categorys=t.data.data,e.ruleForm.category={name:e.categorys[0].name,id:e.categorys[0].id}):e.categorys=null}))},doPushRequest:function(){this.push_dialog_form_visible=!1,this.push_dialog_show=!1;var e=this.$refs["cascader"].getCheckedNodes(),t=[],a=[];e.forEach((function(e){e.children.length>0?t.push(e.value):a.push(e.value)})),this.$axios.post("/pushrequest",{alias:t,platform:["all"],registerid:a,contentType:this.currentpushcontent.type_id,messageContent:this.currentpushcontent.content,title:"推送",extras:{path:this.currentpushcontent.resource_path.split(";").filter((function(e){return""!=e})),time:[this.currentpushcontent.expirationdate_start,this.currentpushcontent.expirationdate_end]}}).then((function(e){200===e.data.code&&console.log("successResponse")})).catch((function(e){console.log("failResponse")}))},processStringArray:function(){var e="";return this.ruleForm.resource_path.forEach((function(t){console.log("item > "+t),e=e+t+";",console.log("result > "+e)})),e}}}),de=ue,me=(a("0b35"),Object(s["a"])(de,se,ce,!1,null,null,null)),pe=me.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("body",{staticClass:"devicegroups_body"},[a("el-button",{staticClass:"add_btn",attrs:{type:"text",align:"left"},on:{click:function(t){return e.handleClick(-1,2)}}},[e._v("新增")]),a("el-table",{staticClass:"groups_table",attrs:{data:e.devicegroups}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"设备分组名称"}}),a("el-table-column",{attrs:{align:"center",prop:"alias",label:"别名"}}),a("el-table-column",{staticClass:"note",attrs:{align:"center",prop:"note",label:"备注"}}),a("el-table-column",{attrs:{align:"center",prop:"operator_name",label:"操作人"}}),a("el-table-column",{attrs:{align:"center",prop:"time",label:"操作时间"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,0)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,1)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,3)}}},[e._v("移除")])]}}])})],1),e.cleanDialog?a("el-dialog",{attrs:{title:"分组详情",width:"30%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.closeDialog()}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":e.formLabelWidth,disabled:e.inputEnable}},[a("el-form-item",{attrs:{label:"分组名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"分组名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"分组别名",prop:"alias"}},[a("el-input",{attrs:{placeholder:"分组别名"},model:{value:e.ruleForm.alias,callback:function(t){e.$set(e.ruleForm,"alias",t)},expression:"ruleForm.alias"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.inputEnable,expression:"!inputEnable"}]},[a("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.btnTxt)},on:{click:function(t){return e.submitForm()}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1):e._e()],1)},be=[],ge={data:function(){return{btnTxt:"",devicegroups:[],cleanDialog:!1,dialogFormVisible:!1,url:"",ruleForm:{id:-1,name:"",alias:"",time:"",parentGroupId:0,operator_name:"",note:""},formLabelWidth:"120px",dialogType:0,inputEnable:!1,username:"",type:0,date:"",rules:{name:[{required:!0,message:"请输入分组名称",trigger:"blur"}],alias:[{required:!0,message:"请输入分组别名",trigger:"blur"}],note:[{required:!1,message:"备注",trigger:"blur"}]}}},mounted:function(){this.queryall()},methods:{queryall:function(){var e=this,t="/queryalldevicegroup";this.$axios.get(t).then((function(t){t&&200===t.data.code?e.devicegroups=t.data.data:e.devicegroups=null}))},handleClick:function(e,t){var a=this;switch(a.dialogType=t,t){case 0:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t;var r=a.devicegroups[e];this.filldata(r);break;case 1:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t;var l=a.devicegroups[e];a.filldata(l),a.btnTxt="提交修改";break;case 2:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t,a.btnTxt="立即创建";break;case 3:this.delete(a.devicegroups[e]);break}},filldata:function(e){this.ruleForm=e},delete:function(e){var t=this;this.devicegroup=e.name,this.$axios.delete("/removedevicegroup/"+e.id).then((function(e){e&&200===e.data.code&&t.queryall()}))},submitForm:function(){var e=this,t=this;t.devicegroup=t.ruleForm.name,t.$refs.ruleForm.validate((function(a){if(!a)return!1;e.dialogFormVisible=!1,-1==e.ruleForm.id?e.$axios.post("/appenddevicegroup",{name:t.ruleForm.name,alias:t.ruleForm.alias,device_group_id:t.ruleForm.parentGroupId,operator_name:t.$store.state.user.username,time:e.$moment(new Date).format("YYYY-MM-DD  HH:mm:ss"),note:t.ruleForm.note}).then((function(e){200===e.data.code&&t.queryall()})).catch((function(e){})):t.$axios.post("/updatedevicegroup",{id:t.ruleForm.id,name:t.ruleForm.name,alias:t.ruleForm.alias,operator_name:t.$store.state.user.username,time:e.$moment(new Date).format("YYYY-MM-DD  HH:mm:ss"),note:t.ruleForm.note}).then((function(e){console.log(e.data),200===e.data.code&&t.queryall()})).catch((function(e){}))}))},closeDialog:function(){this.ruleForm={id:"",name:"",alias:"",parentGroupId:0,operator_id:"",operator_name:"",note:""}},findbyuuid:function(){var e="/findbyuuid?uuid=8d8d7c73-2333-41d2-9994-c2180aa892f7";this.$axios.get(e).then((function(e){e&&e.data.code}))}}},he=ge,ve=(a("fdb0"),Object(s["a"])(he,fe,be,!1,null,null,null)),_e=ve.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("body",{staticClass:"categorys_body"},[a("el-button",{staticClass:"add_btn",attrs:{type:"text",align:"left"},on:{click:function(t){return e.handleClick(-1,2)}}},[e._v("新增")]),a("el-table",{staticClass:"groups_table",attrs:{data:e.categorys}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"类别名称"}}),a("el-table-column",{staticClass:"note",attrs:{align:"center",prop:"note",label:"备注"}}),a("el-table-column",{attrs:{align:"center",prop:"operator_name",label:"操作人"}}),a("el-table-column",{attrs:{align:"center",prop:"time",label:"操作时间"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,0)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,1)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.$index,3)}}},[e._v("移除")])]}}])})],1),e.cleanDialog?a("el-dialog",{attrs:{title:"分组详情",width:"30%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.closeDialog()}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":e.formLabelWidth,disabled:e.inputEnable}},[a("el-form-item",{attrs:{label:"分组名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"分组名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.inputEnable,expression:"!inputEnable"}]},[a("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.btnTxt)},on:{click:function(t){return e.submitForm()}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1):e._e()],1)},Fe=[],xe={data:function(){return{btnTxt:"",categorys:[],cleanDialog:!1,dialogFormVisible:!1,url:"",ruleForm:{id:-1,name:"",time:"",operator_name:"",note:""},formLabelWidth:"120px",dialogType:0,inputEnable:!1,username:"",type:0,date:"",rules:{name:[{required:!0,message:"请输入分组名称",trigger:"blur"}],note:[{required:!1,message:"备注",trigger:"blur"}]}}},mounted:function(){this.queryall()},methods:{queryall:function(){var e=this,t="/queryallcategory";this.$axios.get(t).then((function(t){t&&200===t.data.code?e.categorys=t.data.data:e.categorys=null}))},handleClick:function(e,t){var a=this;switch(a.dialogType=t,t){case 0:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t;var r=a.categorys[e];this.filldata(r);break;case 1:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t;var l=a.categorys[e];a.filldata(l),a.btnTxt="提交修改";break;case 2:a.cleanDialog=!0,a.dialogFormVisible=!0,a.inputEnable=0==t,a.btnTxt="立即创建";break;case 3:this.delete(a.categorys[e]);break}},filldata:function(e){this.ruleForm=e},delete:function(e){var t=this;this.$axios.delete("/removecategory/"+e.id).then((function(e){e&&200===e.data.code&&t.queryall()}))},submitForm:function(){var e=this,t=this;t.devicegroup=t.ruleForm.name,t.$refs.ruleForm.validate((function(a){if(!a)return!1;e.dialogFormVisible=!1,-1==e.ruleForm.id?e.$axios.post("/appendcategory",{name:t.ruleForm.name,device_group_id:t.ruleForm.parentGroupId,operator_name:t.$store.state.user.username,time:e.$moment(new Date).format("YYYY-MM-DD  HH:mm:ss"),note:t.ruleForm.note}).then((function(e){200===e.data.code&&t.queryall()})).catch((function(e){})):t.$axios.post("/updatecategory",{id:t.ruleForm.id,name:t.ruleForm.name,operator_name:t.$store.state.user.username,time:e.$moment(new Date).format("YYYY-MM-DD  HH:mm:ss"),note:t.ruleForm.note}).then((function(e){console.log(e.data),200===e.data.code&&t.queryall()})).catch((function(e){}))}))},closeDialog:function(){this.ruleForm={id:"",name:"",parentGroupId:0,operator_id:"",operator_name:"",note:""}},findbyuuid:function(){var e="/findbyuuid?uuid=8d8d7c73-2333-41d2-9994-c2180aa892f7";this.$axios.get(e).then((function(e){e&&e.data.code}))}}},je=xe,ke=(a("81be"),Object(s["a"])(je,ye,Fe,!1,null,null,null)),$e=ke.exports;r["default"].use(p["a"]);var we=new p["a"]({mode:"history",routes:[{path:"/home",name:"Home",component:E,redirect:"/index",children:[{path:"/index",name:"List",component:ie,meta:{requireAuth:!0}},{path:"/library",name:"Library",component:B,meta:{requireAuth:!0}},{path:"/contents",name:"Contents",component:pe,meta:{requireAuth:!0}},{path:"/devicegroups",name:"DeviceGroups",component:_e,meta:{requireAuth:!0}},{path:"/category",name:"Category",component:$e,meta:{requireAuth:!0}}]},{path:"/login",name:"Login",component:_}]}),Ce=a("2f62");r["default"].use(Ce["a"]);var De=new Ce["a"].Store({state:{user:{username:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).username}},mutations:{login:function(e,t){e.user=t,window.localStorage.setItem("user",JSON.stringify(t))}}}),qe=a("c1df"),Se=a.n(qe);r["default"].config.productionTip=!1;var Ee=a("bc3a");Ee.defaults.baseURL="http://43.129.67.227:8989/api",r["default"].prototype.$axios=Ee,r["default"].prototype.$moment=Se.a,r["default"].use(m.a),we.beforeEach((function(e,t,a){e.meta.requireAuth?De.state.user.username?a():a({path:"login",query:{redirect:e.fullPath}}):a()})),new r["default"]({el:"#app",render:function(e){return e(u)},router:we,store:De,components:{App:u},template:"<App/>"}).$mount("#app")},5888:function(e,t,a){},"5b72":function(e,t,a){},"6b3e":function(e,t,a){},7174:function(e,t,a){},"7df9":function(e,t,a){},"81be":function(e,t,a){"use strict";a("5888")},"85ec":function(e,t,a){},"8dfb":function(e,t,a){"use strict";a("0f87")},9669:function(e,t,a){"use strict";a("9fd9")},"997f":function(e,t,a){"use strict";a("dc7c")},"9fd9":function(e,t,a){},b77a:function(e,t,a){"use strict";a("3640")},dc7c:function(e,t,a){},e6bc:function(e,t,a){},fdb0:function(e,t,a){"use strict";a("e6bc")}});
//# sourceMappingURL=app.feeecfcb.js.map